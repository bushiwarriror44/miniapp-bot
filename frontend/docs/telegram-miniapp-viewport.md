# Telegram Mini App: полноэкран и закрепление (без закрытия свайпом)

## Цель

При запуске Mini App внутри Telegram:
- открывать на **весь доступный экран** (закрепление сверху);
- **не давать закрыть** приложение простым свайпом вниз по контенту.

## Официальный API (core.telegram.org/bots/webapps)

### 1. Развернуть на максимальную высоту

- **`Telegram.WebApp.expand()`**  
  Разворачивает Mini App на максимальную доступную высоту. Нижняя часть (поле ввода чата) может оставаться видимой — это зависит от клиента и способа открытия.

- **`Telegram.WebApp.isExpanded`**  
  `true`, если приложение уже развёрнуто на максимум.

### 2. Полноэкранный режим (без шапки Telegram)

- **Bot API 8.0+**: `Telegram.WebApp.requestFullscreen()`  
  Режим «на весь экран»: без шапки Telegram, контент под статус-бар. Закрытие по-прежнему возможно через системную шапку/жесты ОС.

- **Проверка поддержки:** `Telegram.WebApp.isVersionAtLeast('8.0')`

### 3. Отключение закрытия свайпом вниз

- **Bot API 7.7+**: `Telegram.WebApp.disableVerticalSwipes()`  
  Отключает **вертикальные свайпы по контенту** для закрытия или сворачивания Mini App.

- **Важно:** закрытие **свайпом по шапке** Mini App остаётся — пользователь не «застревает» в приложении.

- **Включить обратно:** `Telegram.WebApp.enableVerticalSwipes()`  
  Рекомендуется отключать свайпы только если они мешают жестам внутри приложения.

- **Проверка поддержки:** `Telegram.WebApp.isVersionAtLeast('7.7')`

## Рекомендуемая последовательность при старте

1. Как можно раньше вызвать `Telegram.WebApp.ready()` (уже делается в приложении).
2. Вызвать `expand()` — развернуть на всю доступную высоту.
3. Если `isVersionAtLeast('7.7')` — вызвать `disableVerticalSwipes()`.
4. (Опционально) Если нужен именно полноэкран без шапки и `isVersionAtLeast('8.0')` — вызвать `requestFullscreen()`; учесть safe area (notch, статус-бар).

## Альтернатива (старые версии / без API 7.7)

Документация [Telegram Mini Apps — Sticky App](https://docs.telegram-mini-apps.com/platform/sticky-app) описывает CSS-подход: контейнер с `overflow: hidden`, `height: 100vh`, вложенный скролл. Это уменьшает случайное закрытие свайпом, но не даёт гарантий и не заменяет `disableVerticalSwipes()` там, где API доступен.

## Итог для нашего приложения

В коде при старте (клиент, один раз):

- `expand()` — всегда, чтобы открываться на весь экран.
- `disableVerticalSwipes()` — при поддержке API 7.7+, чтобы нельзя было закрыть простым свайпом вниз по контенту.

Полноэкран без шапки (`requestFullscreen`) можно добавить опционально для Bot API 8.0+.
