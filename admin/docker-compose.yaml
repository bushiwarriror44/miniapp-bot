services:
  admin-api:
    build:
      context: ..
      dockerfile: admin/Dockerfile
    container_name: miniapp-admin-api
    restart: unless-stopped
    env_file:
      - .env
    environment:
      - FLASK_DEBUG=False
      - ALLOWED_ORIGINS=*
      - BACKEND_API_URL=http://host.docker.internal:3001
      - BOT_TOKEN=${BOT_TOKEN}
      - ADMIN_PUBLIC_BASE_URL=${ADMIN_PUBLIC_BASE_URL}
      - ADMIN_API_TOKEN=
    extra_hosts:
      - "host.docker.internal:host-gateway"
    ports:
      - "5000:5000"
    volumes:
      - ./data:/app/admin/data
